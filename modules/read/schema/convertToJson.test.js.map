{"version":3,"file":"convertToJson.test.js","names":["convertToJson","parseArray","getBlock","Integer","URL","Email","date","convertToUTCTimezone","Date","describe","it","should","deep","equal","parse","getTimezoneOffset","DATE","prop","type","NUMBER","Number","BOOLEAN","Boolean","STRING","String","PHONE","value","PHONE_TYPE","rows","errors","toISOString","number","phone","phoneType","string","required","error","row","column","NAMES","names","INTEGER","length","reason","EMAIL","NAME","validate","Error","TRUE","FALSE","INVALID","rowMap","STATUS","oneOf","A","B","C","CA","CB","a","b","c","includeNullValues","getTime"],"sources":["../../../source/read/schema/convertToJson.test.js"],"sourcesContent":["import convertToJson, { parseArray, getBlock } from './convertToJson.js'\n\nimport Integer from '../../types/Integer.js'\nimport URL from '../../types/URL.js'\nimport Email from '../../types/Email.js'\n\nconst date = convertToUTCTimezone(new Date(2018, 3 - 1, 24))\n\ndescribe('convertToJson', () => {\n\tit('should parse arrays', () => {\n\t\tgetBlock('abc\"de,f\"g,h', ',', 0).should.deep.equal(['abcde,fg', 10])\n\t\tparseArray(' abc\"de,f\"g  , h ').should.deep.equal(['abcde,fg', 'h'])\n\t})\n\n\tit('should convert to json', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'DATE',\n\t\t\t\t'NUMBER',\n\t\t\t\t'BOOLEAN',\n\t\t\t\t'STRING',\n\t\t\t\t'PHONE',\n\t\t\t\t'PHONE_TYPE'\n\t\t\t], [\n\t\t\t\tnew Date(Date.parse('03/24/2018') - new Date().getTimezoneOffset() * 60 * 1000), // '43183', // '03/24/2018',\n\t\t\t\t'123',\n\t\t\t\ttrue,\n\t\t\t\t'abc',\n\t\t\t\t'(123) 456-7890',\n\t\t\t\t'(123) 456-7890'\n\t\t\t]\n\t\t], {\n\t\t\tDATE: {\n\t\t\t\tprop: 'date',\n\t\t\t\ttype: Date\n\t\t\t},\n\t\t\tNUMBER: {\n\t\t\t\tprop: 'number',\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tBOOLEAN: {\n\t\t\t\tprop: 'boolean',\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\tSTRING: {\n\t\t\t\tprop: 'string',\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\tPHONE: {\n\t\t\t\tprop: 'phone',\n\t\t\t\tparse(value) {\n\t\t\t\t\treturn '+11234567890'\n\t\t\t\t}\n\t\t\t},\n\t\t\tPHONE_TYPE: {\n\t\t\t\tprop: 'phoneType',\n\t\t\t\ttype(value) {\n\t\t\t\t\treturn '+11234567890'\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([])\n\n\t\t// Convert `Date` to `String` for equality check.\n\t\trows[0].date = rows[0].date.toISOString()\n\n\t\trows.should.deep.equal([{\n\t\t\tdate: date.toISOString(),\n\t\t\tnumber: 123,\n\t\t\tphone: '+11234567890',\n\t\t\tphoneType: '+11234567890',\n\t\t\tboolean: true,\n\t\t\tstring: 'abc'\n\t\t}])\n\t})\n\n\tit('should support schema entries with no `type`s', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'DATE',\n\t\t\t\t'NUMBER',\n\t\t\t\t'BOOLEAN',\n\t\t\t\t'STRING'\n\t\t\t], [\n\t\t\t\tnew Date(Date.parse('03/24/2018') - new Date().getTimezoneOffset() * 60 * 1000), // '43183', // '03/24/2018',\n\t\t\t\t123,\n\t\t\t\ttrue,\n\t\t\t\t'abc'\n\t\t\t]\n\t\t], {\n\t\t\tDATE: {\n\t\t\t\tprop: 'date'\n\t\t\t},\n\t\t\tNUMBER: {\n\t\t\t\tprop: 'number'\n\t\t\t},\n\t\t\tBOOLEAN: {\n\t\t\t\tprop: 'boolean'\n\t\t\t},\n\t\t\tSTRING: {\n\t\t\t\tprop: 'string'\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([])\n\n\t\t// Convert `Date` to `String` for equality check.\n\t\trows[0].date = rows[0].date.toISOString()\n\n\t\trows.should.deep.equal([{\n\t\t\tdate: date.toISOString(),\n\t\t\tnumber: 123,\n\t\t\tboolean: true,\n\t\t\tstring: 'abc'\n\t\t}])\n\t})\n\n\tit('should require fields', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'NUMBER'\n\t\t\t], [\n\t\t\t\tnull\n\t\t\t]\n\t\t], {\n\t\t\tNUMBER: {\n\t\t\t\tprop: 'number',\n\t\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'required',\n\t\t\trow: 2,\n\t\t\tcolumn: 'NUMBER',\n\t\t\ttype: Number,\n\t\t\tvalue: null\n\t\t}])\n\n\t\trows.should.deep.equal([])\n\t})\n\n\tit('should parse arrays', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'NAMES'\n\t\t\t], [\n\t\t\t\t'Barack Obama, \"String, with, colons\", Donald Trump'\n\t\t\t], [\n\t\t\t\tnull\n\t\t\t]\n\t\t], {\n\t\t\tNAMES: {\n\t\t\t\tprop: 'names',\n\t\t\t\ttype: [String]\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([])\n\n\t\trows.should.deep.equal([{\n\t\t\tnames: ['Barack Obama', 'String, with, colons', 'Donald Trump']\n\t\t}])\n\t})\n\n\tit('should parse integers', () =>\n\t{\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'INTEGER'\n\t\t\t], [\n\t\t\t\t'1'\n\t\t\t], [\n\t\t\t\t'1.2'\n\t\t\t]\n\t\t], {\n\t\t\tINTEGER: {\n\t\t\t\tprop: 'value',\n\t\t\t\ttype: Integer\n\t\t\t}\n\t\t})\n\n\t\terrors.length.should.equal(1)\n\t\terrors[0].should.deep.equal({\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_an_integer',\n\t\t\trow: 3,\n\t\t\tcolumn: 'INTEGER',\n\t\t\ttype: Integer,\n\t\t\tvalue: '1.2'\n\t\t})\n\n\t\trows.should.deep.equal([{\n\t\t\tvalue: 1\n\t\t}])\n\t})\n\n\tit('should parse URLs', () =>\n\t{\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'URL'\n\t\t\t], [\n\t\t\t\t'https://kremlin.ru'\n\t\t\t], [\n\t\t\t\t'kremlin.ru'\n\t\t\t]\n\t\t], {\n\t\t\tURL: {\n\t\t\t\tprop: 'value',\n\t\t\t\ttype: URL\n\t\t\t}\n\t\t})\n\n\t\terrors.length.should.equal(1)\n\t\terrors[0].row.should.equal(3)\n\t\terrors[0].column.should.equal('URL')\n\t\terrors[0].error.should.equal('invalid')\n\n\t\trows.should.deep.equal([{\n\t\t\tvalue: 'https://kremlin.ru'\n\t\t}])\n\t})\n\n\tit('should parse Emails', () =>\n\t{\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'EMAIL'\n\t\t\t], [\n\t\t\t\t'vladimir.putin@kremlin.ru'\n\t\t\t], [\n\t\t\t\t'123'\n\t\t\t]\n\t\t], {\n\t\t\tEMAIL: {\n\t\t\t\tprop: 'value',\n\t\t\t\ttype: Email\n\t\t\t}\n\t\t})\n\n\t\terrors.length.should.equal(1)\n\t\terrors[0].row.should.equal(3)\n\t\terrors[0].column.should.equal('EMAIL')\n\t\terrors[0].error.should.equal('invalid')\n\n\t\trows.should.deep.equal([{\n\t\t\tvalue: 'vladimir.putin@kremlin.ru'\n\t\t}])\n\t})\n\n\tit('should call .validate()', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'NAME'\n\t\t\t], [\n\t\t\t\t'George Bush'\n\t\t\t]\n\t\t], {\n\t\t\tNAME: {\n\t\t\t\tprop: 'name',\n\t\t\t\ttype: String,\n\t\t\t\trequired: true,\n\t\t\t\tvalidate: (value) => {\n\t\t\t\t\tif (value === 'George Bush') {\n\t\t\t\t\t\tthrow new Error('custom-error')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'custom-error',\n\t\t\trow: 2,\n\t\t\tcolumn: 'NAME',\n\t\t\ttype: String,\n\t\t\tvalue: 'George Bush'\n\t\t}])\n\n\t\trows.should.deep.equal([])\n\t})\n\n\tit('should validate numbers', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'NUMBER'\n\t\t\t], [\n\t\t\t\t'123abc'\n\t\t\t]\n\t\t], {\n\t\t\tNUMBER: {\n\t\t\t\tprop: 'number',\n\t\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_a_number',\n\t\t\trow: 2,\n\t\t\tcolumn: 'NUMBER',\n\t\t\ttype: Number,\n\t\t\tvalue: '123abc'\n\t\t}])\n\n\t\trows.should.deep.equal([])\n\t})\n\n\tit('should validate booleans', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'TRUE',\n\t\t\t\t'FALSE',\n\t\t\t\t'INVALID'\n\t\t\t], [\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t\t'TRUE'\n\t\t\t]\n\t\t], {\n\t\t\tTRUE: {\n\t\t\t\tprop: 'true',\n\t\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tFALSE: {\n\t\t\t\tprop: 'false',\n\t\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tINVALID: {\n\t\t\t\tprop: 'invalid',\n\t\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_a_boolean',\n\t\t\trow: 2,\n\t\t\tcolumn: 'INVALID',\n\t\t\ttype: Boolean,\n\t\t\tvalue: 'TRUE'\n\t\t}])\n\n\t\trows.should.deep.equal([{\n\t\t\ttrue: true,\n\t\t\tfalse: false\n\t\t}])\n\t})\n\n\tit('should validate dates', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'DATE',\n\t\t\t\t'INVALID'\n\t\t\t], [\n\t\t\t\t43183, // 03/24/2018',\n\t\t\t\t'-'\n\t\t\t], [\n\t\t\t\tdate, // 03/24/2018',,\n\t\t\t\t'-'\n\t\t\t]\n\t\t], {\n\t\t\tDATE: {\n\t\t\t\tprop: 'date',\n\t\t\t\ttype: Date,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tINVALID: {\n\t\t\t\tprop: 'invalid',\n\t\t\t\ttype: Date,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_a_date',\n\t\t\trow: 2,\n\t\t\tcolumn: 'INVALID',\n\t\t\ttype: Date,\n\t\t\tvalue: '-'\n\t\t}, {\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_a_date',\n\t\t\trow: 3,\n\t\t\tcolumn: 'INVALID',\n\t\t\ttype: Date,\n\t\t\tvalue: '-'\n\t\t}])\n\n\t\trows.should.deep.equal([{\n\t\t\tdate\n\t\t}, {\n\t\t\tdate\n\t\t}])\n\t})\n\n\tit('should throw parse() errors', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'PHONE',\n\t\t\t\t'PHONE_TYPE'\n\t\t\t], [\n\t\t\t\t'123',\n\t\t\t\t'123'\n\t\t\t]\n\t\t], {\n\t\t\tPHONE: {\n\t\t\t\tprop: 'phone',\n\t\t\t\tparse: () => {\n\t\t\t\t\tthrow new Error('invalid')\n\t\t\t\t}\n\t\t\t},\n\t\t\tPHONE_TYPE: {\n\t\t\t\tprop: 'phoneType',\n\t\t\t\tparse: () => {\n\t\t\t\t\tthrow new Error('invalid')\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\trow: 2,\n\t\t\tcolumn: 'PHONE',\n\t\t\tvalue: '123'\n\t\t}, {\n\t\t\terror: 'invalid',\n\t\t\trow: 2,\n\t\t\tcolumn: 'PHONE_TYPE',\n\t\t\tvalue: '123'\n\t\t}])\n\n\t\trows.should.deep.equal([])\n\t})\n\n\tit('should map row numbers', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'NUMBER'\n\t\t\t], [\n\t\t\t\t'123abc'\n\t\t\t]\n\t\t], {\n\t\t\tNUMBER: {\n\t\t\t\tprop: 'number',\n\t\t\t\ttype: Number\n\t\t\t}\n\t\t}, {\n\t\t\trowMap: [2, 5]\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\treason: 'not_a_number',\n\t\t\trow: 6,\n\t\t\tcolumn: 'NUMBER',\n\t\t\ttype: Number,\n\t\t\tvalue: '123abc'\n\t\t}])\n\t})\n\n\tit('should validate \"oneOf\" (valid)', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'STATUS'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'STARTED'\n\t\t\t]\n\t\t], {\n\t\t\tSTATUS: {\n\t\t\t\tprop: 'status',\n\t\t\t\ttype: String,\n\t\t\t\toneOf: [\n\t\t\t\t\t'STARTED',\n\t\t\t\t\t'FINISHED'\n\t\t\t\t]\n\t\t\t}\n\t\t})\n\n\t\terrors.length.should.equal(0)\n\t})\n\n\tit('should validate \"oneOf\" (not valid)', () => {\n\t\tconst { rows, errors } = convertToJson([\n\t\t\t[\n\t\t\t\t'STATUS'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'SCHEDULED'\n\t\t\t]\n\t\t], {\n\t\t\tSTATUS: {\n\t\t\t\tprop: 'status',\n\t\t\t\ttype: String,\n\t\t\t\toneOf: [\n\t\t\t\t\t'STARTED',\n\t\t\t\t\t'FINISHED'\n\t\t\t\t]\n\t\t\t}\n\t\t})\n\n\t\terrors.should.deep.equal([{\n\t\t\terror: 'invalid',\n\t\t\treason: 'unknown',\n\t\t\trow: 2,\n\t\t\tcolumn: 'STATUS',\n\t\t\ttype: String,\n\t\t\tvalue: 'SCHEDULED'\n\t\t}])\n\t})\n\n\tit('should not include `null` values by default', function() {\n\t\tconst { rows } = convertToJson(\n\t\t\t[\n\t\t\t\t['A', 'B', 'CA', 'CB'],\n\t\t\t\t['a', 'b', 'ca', null],\n\t\t\t\t['a', null]\n\t\t\t],\n\t\t\t{\n\t\t\t\tA: {\n\t\t\t\t\tprop: 'a',\n\t\t\t\t\ttype: String\n\t\t\t\t},\n\t\t\t\tB: {\n\t\t\t\t\tprop: 'b',\n\t\t\t\t\ttype: String\n\t\t\t\t},\n\t\t\t\tC: {\n\t\t\t\t\tprop: 'c',\n    \t\t\ttype: {\n\t\t\t\t\t\tCA: {\n\t\t\t\t\t\t\tprop: 'a',\n\t\t\t\t\t\t\ttype: String\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCB: {\n\t\t\t\t\t\t\tprop: 'b',\n\t\t\t\t\t\t\ttype: String\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\n\t\trows.should.deep.equal([\n\t\t\t{ a: 'a', b: 'b', c: { a: 'ca' } },\n\t\t\t{ a: 'a' },\n\t\t])\n\t})\n\n\tit('should include `null` values when `includeNullValues: true` option is passed', function() {\n\t\tconst { rows } = convertToJson(\n\t\t\t[\n\t\t\t\t['A', 'B', 'CA', 'CB'],\n\t\t\t\t['a', 'b', 'ca', null],\n\t\t\t\t['a', null]\n\t\t\t],\n\t\t\t{\n\t\t\t\tA: {\n\t\t\t\t\tprop: 'a',\n\t\t\t\t\ttype: String\n\t\t\t\t},\n\t\t\t\tB: {\n\t\t\t\t\tprop: 'b',\n\t\t\t\t\ttype: String\n\t\t\t\t},\n\t\t\t\tC: {\n\t\t\t\t\tprop: 'c',\n    \t\t\ttype: {\n\t\t\t\t\t\tCA: {\n\t\t\t\t\t\t\tprop: 'a',\n\t\t\t\t\t\t\ttype: String\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCB: {\n\t\t\t\t\t\t\tprop: 'b',\n\t\t\t\t\t\t\ttype: String\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tincludeNullValues: true\n\t\t\t}\n\t\t)\n\n\t\trows.should.deep.equal([\n\t\t\t{ a: 'a', b: 'b', c: { a: 'ca', b: null } },\n\t\t\t{ a: 'a', b: null, c: null },\n\t\t])\n\t})\n})\n\n// Converts timezone to UTC while preserving the same time\nfunction convertToUTCTimezone(date) {\n\t// Doesn't account for leap seconds but I guess that's ok\n\t// given that javascript's own `Date()` does not either.\n\t// https://www.timeanddate.com/time/leap-seconds-background.html\n\t//\n\t// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset\n\t//\n\treturn new Date(date.getTime() - date.getTimezoneOffset() * 60 * 1000)\n}\n"],"mappings":"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"}